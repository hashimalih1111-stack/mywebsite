<!DOCTYPE html>
<html>
<head>
<title>Simple Shooter Game</title>
<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
    }
    canvas {
        background: black;
        display: block;
        margin: auto;
    }
</style>
</head>
<body>
<canvas id="game" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const W = canvas.width;
const H = canvas.height;

// Player
let player = {
    x: W / 2,
    y: H - 60,
    w: 40,
    h: 40,
    speed: 5
};

let bullets = [];
let enemies = [];
let running = true;
let score = 0;
let playBtn = null;

// Controls
let leftPressed = false;
let rightPressed = false;
let spacePressed = false;

document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowLeft") leftPressed = true;
    if (e.key === "ArrowRight") rightPressed = true;
    if (e.key === " ") spacePressed = true;
});

document.addEventListener("keyup", (e) => {
    if (e.key === "ArrowLeft") leftPressed = false;
    if (e.key === "ArrowRight") rightPressed = false;
    if (e.key === " ") spacePressed = false;
});

// Shoot
function shoot() {
    bullets.push({
        x: player.x + player.w / 2 - 2,
        y: player.y,
        w: 4,
        h: 10,
        speed: 7
    });
}

// Enemy spawn
function spawnEnemy() {
    enemies.push({
        x: Math.random() * (W - 40),
        y: -40,
        w: 40,
        h: 40,
        speed: 2 + Math.random() * 2
    });
}
setInterval(spawnEnemy, 1000);

// Collision check
function coll(a, b) {
    return (
        a.x < b.x + b.w &&
        a.x + a.w > b.x &&
        a.y < b.y + b.h &&
        a.y + a.h > b.y
    );
}

// Reset game
function reset() {
    player.x = W / 2;
    bullets = [];
    enemies = [];
    score = 0;
    running = true;
    playBtn = null;
}

// Draw game over
function gameOver() {
    running = false;

    ctx.fillStyle = "rgba(0,0,0,0.7)";
    ctx.fillRect(0, 0, W, H);

    ctx.fillStyle = "#fff";
    ctx.font = "40px monospace";
    ctx.textAlign = "center";
    ctx.fillText("GAME OVER", W / 2, H / 2 - 20);

    ctx.font = "20px monospace";
    ctx.fillText("Score: " + score, W / 2, H / 2 + 10);

    // Play Again button
    ctx.fillStyle = "#222";
    ctx.fillRect(W/2 - 80, H/2 + 40, 160, 40);

    ctx.fillStyle = "#fff";
    ctx.font = "18px monospace";
    ctx.fillText("PLAY AGAIN", W/2, H/2 + 67);

    playBtn = { x: W/2 - 80, y: H/2 + 40, w: 160, h: 40 };
}

// Button click event
canvas.addEventListener("click", function(e) {
    if (!running && playBtn) {
        const rect = canvas.getBoundingClientRect();
        const mx = e.clientX - rect.left;
        const my = e.clientY - rect.top;

        if (mx > playBtn.x && mx < playBtn.x + playBtn.w &&
            my > playBtn.y && my < playBtn.y + playBtn.h) {
            reset();
        }
    }
});

// Game loop
function loop() {
    ctx.clearRect(0, 0, W, H);

    if (running) {
        // Player movement
        if (leftPressed && player.x > 0) player.x -= player.speed;
        if (rightPressed && player.x < W - player.w) player.x += player.speed;

        if (spacePressed && bullets.length < 5) shoot();

        // Draw player
        ctx.fillStyle = "cyan";
        ctx.fillRect(player.x, player.y, player.w, player.h);

        // Bullets
        ctx.fillStyle = "yellow";
        bullets.forEach((b, i) => {
            b.y -= b.speed;
            ctx.fillRect(b.x, b.y, b.w, b.h);
            if (b.y < -20) bullets.splice(i, 1);
        });

        // Enemies
        ctx.fillStyle = "red";
        enemies.forEach((en, i) => {
            en.y += en.speed;
            ctx.fillRect(en.x, en.y, en.w, en.h);

            // Check collision with player
            if (coll(en, player)) gameOver();

            // Check bullet hit
            bullets.forEach((b, j) => {
                if (coll(b, en)) {
                    bullets.splice(j, 1);
                    enemies.splice(i, 1);
                    score += 10;
                }
            });

            // Remove off-screen enemy
            if (en.y > H + 50) enemies.splice(i, 1);
        });

        // Score
        ctx.fillStyle = "#fff";
        ctx.font = "20px monospace";
        ctx.fillText("Score: " + score, 60, 30);
    }

    requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
